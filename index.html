<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>주차타워 관리</title>
<style>
body {
  font-family: Arial;
  margin: 0;
  padding: 20px;
  background: #f4f4f4;
  transition: 0.3s;
}
.dark {
  background: #121212;
  color: white;
}
.container {
  max-width: 800px;
  margin: auto;
}
.grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 10px;
}
.slot {
  border: 1px solid #ccc;
  padding: 10px;
  border-radius: 8px;
  background: white;
}
.dark .slot {
  background: #1e1e1e;
  border-color: #444;
}
input {
  width: 100%;
  margin-top: 5px;
  padding: 5px;
}
button {
  margin: 5px 5px 10px 0;
  padding: 6px 10px;
  cursor: pointer;
}
.hidden {
  display: none;
}
</style>
</head>
<body>

<div id="login">
  <h2>비밀번호 입력</h2>
  <input type="password" id="passwordInput">
  <button onclick="checkPassword()">확인</button>
</div>

<div id="main" class="hidden container">
  <h2>주차타워 관리 (1 ~ 48번)</h2>

  <button onclick="toggleTheme()">다크 / 라이트</button>
  <button onclick="resetAll()">전체 초기화</button>

  <div class="grid" id="grid"></div>
</div>

<script>
const PASSWORD = "1411";
const TOTAL_SLOTS = 48;

const loginDiv = document.getElementById("login");
const mainDiv = document.getElementById("main");
const grid = document.getElementById("grid");

function checkPassword() {
  const input = document.getElementById("passwordInput").value;
  if (input === PASSWORD) {
    localStorage.setItem("loggedIn", "true");
    loginDiv.classList.add("hidden");
    mainDiv.classList.remove("hidden");
  } else {
    alert("비밀번호 틀림");
  }
}

function generateSlots() {
  grid.innerHTML = "";
  for (let i = 1; i <= TOTAL_SLOTS; i++) {
    const div = document.createElement("div");
    div.className = "slot";
    div.innerHTML = `
      <strong>${i}번</strong>
      <input type="text" id="slot-${i}" 
      oninput="saveSlot(${i})"
      placeholder="차량번호 입력">
    `;
    grid.appendChild(div);

    const saved = localStorage.getItem("slot-" + i);
    if (saved) {
      document.getElementById("slot-" + i).value = saved;
    }
  }
}

function saveSlot(i) {
  const value = document.getElementById("slot-" + i).value;
  localStorage.setItem("slot-" + i, value);
}

function resetAll() {
  if (!confirm("전체 차량번호 삭제할까요?")) return;
  for (let i = 1; i <= TOTAL_SLOTS; i++) {
    localStorage.removeItem("slot-" + i);
  }
  generateSlots();
}

function toggleTheme() {
  document.body.classList.toggle("dark");
  const isDark = document.body.classList.contains("dark");
  localStorage.setItem("theme", isDark ? "dark" : "light");
}

(function init() {
  if (localStorage.getItem("theme") === "dark") {
    document.body.classList.add("dark");
  }

  if (localStorage.getItem("loggedIn") === "true") {
    loginDiv.classList.add("hidden");
    mainDiv.classList.remove("hidden");
  }

  generateSlots();
})();
</script>

</body>
</html>
